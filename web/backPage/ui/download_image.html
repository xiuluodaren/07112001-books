<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ftp </title>
    <link rel="stylesheet" href="/backPage/ui/css/bootstrap.css"/>
    <link rel="stylesheet" href="/backPage/ui/css/demo.css" type="text/css"/>
    <link rel="stylesheet" href="/backPage/ui/css/zTreeStyle/zTreeStyle.css" type="text/css"/>
    <link rel="stylesheet" href="/backPage/ui/css/index.css"/>
    <script src="/backPage/ui/js/jquery-1.12.4.js"></script>
    <script type="text/javascript" src="/backPage/ui/js/jquery.ztree.core.js"></script>
    <script src="/backPage/ui/js/bootstrap.js"></script>
    <script LANGUAGE="JavaScript">
        var zTreeObj;
        // zTree 的参数配置，深入使用请参考 API 文档（setting 配置详解）
        var setting = {
            treeId:'',
            zTreeObj:null
        };

        // zTree 的数据属性，深入使用请参考 API 文档（zTreeNode 节点数据详解）
        /*
        var zNodes = [
            {name:"test1", open:true, children:[
                    {name:"test1_1"}, {name:"test1_2"}]},
            {name:"test2", open:true, children:[
                    {name:"test2_1"}, {name:"test2_2"}]},
            {name:"test2", open:true, children:[
                    {name:"test2_1"}, {name:"test2_2"}]},
            {name:"test2", open:true, children:[
                    {name:"test2_1"}, {name:"test2_2"}]}
        ];
        */
        $(document).ready(function(){
            //zTreeObj = $.fn.zTree.init($("#treeDemo"), setting, zNodes);
            $.ajax({
                url:"/operator/getImagesPathNameByTree",
                type:"post",
                success:function(data){
                    data = $.parseJSON(data)
                    zTreeObj = $.fn.zTree.init($("#treeDemo"), setting, data);
                }
            });

            $("#download").click(function(){
                var ip = $("#ip").val();
                var username = $("#username").val();
                var passwd = $("#password").val();
                if(ip==""||username==""||passwd==""){
                    alert("信息输入不完整,请重试!");
                }else{
                    alert("正在下载,请稍候...");
                    var download_data = {ip:ip,username:username,passwd:passwd};
                    $.ajax({
                        url:"/operator/downloadAllFormFtp",
                        type:"post",
                        data:download_data,
                        success:function(data){
                            alert("下载完成!")
                            data = $.parseJSON(data)
                            zTreeObj = $.fn.zTree.init($("#treeDemo"), setting, data);
                        }
                    })
                }
            })
        });
    </script>
</head>
<body>
<div class="content" class="jumbotron text-center" >
    <div class="left">
        <div style="padding: 50px 100px 10px;">
            <form class="bs-example bs-example-form text-right" role="form">
                <div class="input-group">
                    <span class="input-group-addon">IP</span>
                    <input type="text" class="form-control" id="ip" value="39.104.96.182"/>
                </div>
                <br>
                <div class="input-group">
                    <span class="input-group-addon">UserName</span>
                    <input type="text" class="form-control" id="username" value="ftp"/>
                </div>
                <br>
                <div class="input-group">
                    <span class="input-group-addon">PassWord</span>
                    <input type="password" class="form-control" id="password" value="88888888"/>
                </div>
                <br>
                <button type="button" class="btn btn-primary btn-lg btn-block" id="download">下载图片</button>
            </form>
        </div>
    </div>
    <div class="right">
        <ul id="treeDemo" class="ztree" style="overflow:auto;"></ul>
    </div>
</div>
</body>
</html>